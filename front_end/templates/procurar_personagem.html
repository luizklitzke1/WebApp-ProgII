
<!DOCTYPE html>
<html>
  <head>
      <!-- Meta Tags -->
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
      <meta name="author" content="Ace of Spades">
      <meta name="description" content="Site com um sistema simples e pratico de registro e edição de personagens de RPG ">
      <meta name="keywords" content="rpg, personagens, crud">
      <link rel="icon" type="image/png" href="../static/d20_logo.png" />

      <!--Link para CSS  do Bootstrap-->
      <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
      integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

      <!-- Link para estilo customizado-->
      <link rel="stylesheet" type="text/css" href="../static/style.css">
      <link href="https://fonts.googleapis.com/css?family=Supermercado+One&display=swap" rel="stylesheet">
      <link href="https://fonts.googleapis.com/css?family=Noto+Sans&display=swap" rel="stylesheet">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
      
      <title>Projeto RPG JS - Home </title>

  </head>
  <body class='pt-4'>
      <header class="site-header">
        <nav class="navbar navbar-expand-md navbar-dark bg-steel fixed-top">
          <div class="container">

            <!-- Logo do site -->
            <a href="/"><img src="../static/d20_logo.png" width="60" height="60" class="d-inline-block align-top p-0 mr-2" alt="logo_site"></a>
            <a class="navbar-brand mr-4 fonte_mec" href="home.html">Projeto RPG</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarToggle" aria-controls="navbarToggle" aria-expanded="false" 
                    aria-label="Alternar visualização">
              <span class="navbar-toggler-icon"></span>
            </button>

            <!-- Itens - Menu do Cabeçalho -->
            <div class="collapse navbar-collapse" id="navbarToggle">
              <div class="navbar-nav mr-auto">
                <a class="nav-item nav-link" href="home.html">Home</a>
                <a class="nav-item nav-link" href="#" id="linkListarPessoas">Procurar</a>
                <a class="nav-item nav-link" href="registrar_personagem.html">Registrar personagem</a>
              </div>

            </div>
          </div>
        </nav>
      </header>

      <!-- Parte principal do site - Conteúdo -->
      <main role="main" class="container ml- p-0 principal1">
    <div class="content-section">
        <form method="POST" action="" enctype="multipart/form-data">
                {{ form_procurar_pers.hidden_tag() }}
                <fieldset class="form-group">
                    <legend class="border-bottom mb-4 pt-3">Procurar por Personagem</legend>

                    <!-- Nome do personagem-->
                    <div class="form-group row pr-3 pl-3">
                        {{ form_procurar_pers.nome.label(class="form-control-label") }}
                        {% if form_procurar_pers.nome.errors %}
                            {{ form_procurar_pers.nome(class="form-control form-control-lg is-invalid") }}
                            <div class="invalid-feedback">
                                {% for error in form_procurar_pers.nome.errors %}
                                    <span>{{ error }}</span>
                                {% endfor %}
                            </div>
                        {% else %}
                            {{ form_procurar_pers.nome(class="form-control form-control-lg") }}
                        {% endif %}
                    </div>

                    <div class="row">
                        <!-- Raça do personagem-->
                        <div class="form-group col-sm-6">
                            {{ form_procurar_pers.raca.label(class="form-control-label") }}
                            {% if form_procurar_pers.raca.errors %}
                                {{ form_procurar_pers.raca(class="form-control form-control-lg is-invalid") }}
                                <div class="invalid-feedback">
                                    {% for error in form_procurar_pers.raca.errors %}
                                        <span>{{ error }}</span>
                                    {% endfor %}
                                </div>
                            {% else %}
                                {{ form_procurar_pers.raca(class="form-control form-control-lg") }}
                            {% endif %}
                        </div>

                        <!-- Classe do personagem-->
                        <div class="form-group col-sm-6">
                            {{ form_procurar_pers.classe.label(class="form-control-label") }}
                            {% if form_procurar_pers.classe.errors %}
                                {{ form_procurar_pers.raca(class="form-control form-control-lg is-invalid") }}
                                <div class="invalid-feedback">
                                    {% for error in form_procurar_pers.classe.errors %}
                                        <span>{{ error }}</span>
                                    {% endfor %}
                                </div>
                            {% else %}
                                {{ form_procurar_pers.classe(class="form-control form-control-lg") }}
                            {% endif %}
                        </div>
                    </div>

                    <!-- Enviar -->
                    <div class="form-group text-right">
                        {{ form_procurar_pers.botao_procurar(class="btn btn-success") }}
                    </div>

                </fieldset>
        </form>
    </div>

    {% if (personagens.items)|length > 0 %}
        <!-- Mostrar os personagens encontrados na pesquisa -->
        <fieldset class="justify-content-xl-center procurar1">
            <h2 class="mt-4">Personagens encontrados:</h2>
            <div class="container-fluid">
                <div class="row">
                    {% for personagem in personagens.items %}
                        <article class="content-section col-md-4 mb-4 pr-0 m-1 pl-3 pr-3" style="max-width: 340px; text-align: center;" >
                            <div class="media-body">
                                <div class="article-metadata">
                                    <span class="mr-2">Raça: {{ personagem.raca }}</span>
                                    <small class="text-muted">Classe: {{ personagem.classe }}</small>
                                </div>
                                <h2><a class="article-title" href="{{url_for('personagens.mostrar_personagem', personagem_id=personagem.id)}}">{{ personagem.nome }}</a></h2>
                                <p class="article-content">Nível: {{ personagem.nivel }}</p>
                                <img class="account-img" src="{{ url_for('static', filename='imagens_personagens/' + personagem.foto) }}">
                                <p class="article-content">Criador por: <a  href="{{url_for('usuarios.mostrar_perfil_usuario', usuario_id = personagem.autor.id)}}">{{ personagem.autor.nome }}</a></p>
                                <p class="article-content">Nota da comunidade: <span class="fonte_mec", style="color: #CE0000">{{ personagem.nota}}</span></p>
                                <small class="text-muted">Criado em: {{ personagem.data_criacao.strftime('%d-%m-%Y') }}</small>
                            </div>
                        </article>
                    {% endfor %}
                </div>
            </div>


            <!-- Botões para a paginação -->
            <div class="text-center">
                {% for pagina in personagens.iter_pages(left_edge=3, right_edge=3, left_current=3,right_current=3) %}
                    {% if pagina %}
                    {% if pagina == personagens.page%}
                        <a class="btn btn-danger mb-4" href="{{url_for('personagens.procurar_personagem', pagina=pagina)}}">{{pagina}}</a>
                    {% else %}
                        <a class="btn btn-dark mb-4" href="{{url_for('personagens.procurar_personagem', pagina=pagina)}}">{{pagina}}</a>
                    {% endif %}
                    {% else %}
                    ...
                    {% endif %}
                {% endfor %}
            </div>
                
        </fieldset>
    </main>
        
    <!-- Footer -->
      <footer class="page-footer font-small special-color-dark pt-4">
        <div class="container">
          <div class="footer-copyright text-center py-3">© 2019 Copyright:
            <a href="/"> ProjetoRPG.com</a>
          </div>
        </div>
      </footer>
   
     <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
        integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
        integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
        crossorigin="anonymous"></script>
    <!-- código específico do front-end -->
    <script src="../js/scriptPers.js"></script>
     
</body>
</html>
